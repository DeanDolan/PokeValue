<!--
  References:
  - Rails form helpers (form_with, fields, select, etc.):
    https://guides.rubyonrails.org/form_helpers.html
  - Bootstrap 5 form layout and grid:
    https://getbootstrap.com/docs/5.3/forms/overview/
-->

<!-- Simple edit form for a holding -->
<div class="container py-3">
  <h3 class="mb-3">Edit Holding</h3>

  <%# Bind the form to @holding so Rails handles PATCH /holdings/:id for me %>
  <%= form_with model: @holding, url: holding_path(@holding), method: :patch, local: true do |f| %>
    <div class="row g-3">
      <!-- Era / Set / Product Type are locked so I don’t accidentally move a holding onto a different product -->
      <div class="col-md-4">
        <label class="form-label">Era</label>
        <%= f.text_field :era, class: "form-control", disabled: true %>
      </div>
      <div class="col-md-4">
        <label class="form-label">Set</label>
        <%= f.text_field :set_name, class: "form-control", disabled: true %>
      </div>
      <div class="col-md-4">
        <label class="form-label">Product Type</label>
        <%= f.text_field :product_type, class: "form-control", disabled: true %>
      </div>

      <!-- Quantity and cost per unit are the main editable investment inputs -->
      <div class="col-md-4">
        <label class="form-label">Quantity</label>
        <%= f.number_field :quantity, min: 1, step: 1, class: "form-control" %>
      </div>
      <div class="col-md-4">
        <label class="form-label">Cost per unit (€)</label>
        <%= f.number_field :cost_per_unit, step: "0.01", class: "form-control" %>
      </div>

      <!-- Value per unit is locked so I keep it in sync with the product pricing feed -->
      <div class="col-md-4">
        <label class="form-label">Value per unit (€)</label>
        <%= f.number_field :value, step: "0.01", class: "form-control", disabled: true %>
      </div>

      <!-- Purchase date and condition give more context around the holding -->
      <div class="col-md-6">
        <label class="form-label">Purchase Date</label>
        <%= f.date_field :purchase_date, class: "form-control" %>
      </div>
      <div class="col-md-6">
        <label class="form-label">Condition</label>
        <%= f.select :condition, [
          "Mint Sealed","Loosely Sealed","Unsealed",
          "Big Tear","Small Tear","Big Imperfections","Small Imperfections",
          "Pressure Marks","Slightly Dented","Heavy Dented","Damaged",
          "Box Only","Contents Only"
        ], {}, class: "form-select" %>
      </div>
    </div>

    <!-- Save updates or go back to the main portfolio without changing anything -->
    <div class="mt-3 d-flex gap-2">
      <%= f.submit "Save", class: "btn btn-primary" %>
      <%= link_to "Cancel", portfolio_path, class: "btn btn-outline-secondary" %>
    </div>
  <% end %>
</div>
